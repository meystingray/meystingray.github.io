---
title: Murder Rates in Dallas
author: Sean Conroy
date: '2020-12-02'
slug: murder-rates-in-dallas
categories:
  - Dallas-Police-Data
tags: []
---

<link href="index_files/anchor-sections/anchor-sections.css" rel="stylesheet" />
<script src="index_files/anchor-sections/anchor-sections.js"></script>


<div id="dallas-murder-rate" class="section level2">
<h2>Dallas Murder Rate</h2>
<p>Based on the following data set from Dallas Open Data: <a href="https://www.dallasopendata.com/Public-Safety/Police-Incidents/qv6i-rri7" class="uri">https://www.dallasopendata.com/Public-Safety/Police-Incidents/qv6i-rri7</a></p>
<p>Data refresh date:</p>
<pre><code>## [1] &quot;2020-12-09&quot;</code></pre>
<p>Load data directly from DallasOpenData using Socrata API:</p>
<pre><code>```r
#PI &lt;- read.socrata(&quot;https://www.dallasopendata.com/resource/qv6i-rri7.csv&quot;)
#PI &lt;- readRDS(&quot;C:/Users/sconroy/Desktop/Debug/PoliceIncidents.RDS&quot;)
#setDT(PI)
```</code></pre>
<p>First, let’s extract murder incidents by looking for “MURDER” or “HOMICIDE” in the officer’s incident description.</p>
<pre class="r"><code>Murder &lt;- readRDS(&quot;C:/Users/sconroy/Desktop/Debug/Murder.RDS&quot;)
#Murder &lt;- PI[grepl(&quot;MURDER&quot;,offincident) | grepl(&quot;HOMICIDE&quot;,offincident),]
Murder[,Date := as.Date(substr(date1,1,10))]

# Add Dates and Incidents / Day &amp; Month counts 
Murder[,MonthDate := as.Date(paste0(format(Date,&quot;%Y-%m&quot;),&quot;-01&quot;))]
Murder[,WeekNum := strftime(Date, format = &quot;%V&quot;)]
Murder &lt;- merge(Murder,Murder[,head(.SD, 1L),.SDcols = &quot;Date&quot;,by = c(&quot;servyr&quot;,&quot;WeekNum&quot;)],by = c(&quot;servyr&quot;,&quot;WeekNum&quot;))
setnames(Murder,old = c(&quot;Date.x&quot;,&quot;Date.y&quot;),new = c(&quot;Date&quot;,&quot;WeekDate&quot;))

setorder(Murder,Date)

Murder[,NumPerDay := .N,by = Date]
Murder[,NumPerWeek := .N,by = WeekDate]
Murder[,NumPerMonth := .N,by = MonthDate]</code></pre>
<p>First let’s smooth the data</p>
<pre class="r"><code># Smooth Murder Rates for plotting
Murder[,SmoothNumPerDay := predict(smooth.spline(NumPerDay,df = 20))$y]
Murder[,SmoothNumPerWeek := predict(smooth.spline(NumPerWeek,df = 55))$y]
Murder[,SmoothNumPerMonth := predict(smooth.spline(NumPerMonth,df = 10))$y]</code></pre>
<p>Now let’s take a look at Murder Rates per Month over the last few years.</p>
<pre class="r"><code>ggplot(Murder) +
    geom_line(aes(x = MonthDate,y = SmoothNumPerMonth,color = &quot;red&quot;)) + 
    geom_point(data = Murder,aes(x = Date,y = NumPerMonth)) + 
    geom_line(aes(x = Date,y = SmoothNumPerDay,color = &quot;blue&quot;)) +
    ggtitle(&quot;Murder Rates&quot;) + ylab(&quot;# Murders&quot;) + 
    scale_colour_manual(name = &#39;&#39;,values = c(&#39;blue&#39;=&#39;blue&#39;,&#39;red&#39;=&#39;red&#39;),
                        labels = c(&#39;Per Day&#39;,&#39;Per Month&#39;))</code></pre>
<p><img src="index_files/figure-html/Monthly%20Murder%20Rate-1.png" width="672" />
Yes - it definitely looks like there’s an uptick in the last few months of 2020!</p>
<p>Let’s take a look at the same data, but bin it by week instead of month:</p>
<pre><code>```r
ggplot(Murder) +
geom_point(aes(x = WeekDate,y = NumPerWeek)) + 
geom_line(aes(x = WeekDate,y = SmoothNumPerWeek),color = &quot;red&quot;) +
ggtitle(&quot;Murder Rates per Week&quot;) + ylab(&quot;# Murders&quot;)
```

&lt;img src=&quot;index_files/figure-html/Weekly Murder Rate-1.png&quot; width=&quot;672&quot; /&gt;</code></pre>
<p>The rates look even worse when binned by week - because a few incidents were concentrated?</p>
</div>
