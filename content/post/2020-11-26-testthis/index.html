---
title: Dallas Murder Rates
author: Sean Conroy
date: '2020-11-26'
slug: testthis
categories: []
tags: []
---

<link href="index_files/anchor-sections/anchor-sections.css" rel="stylesheet" />
<script src="index_files/anchor-sections/anchor-sections.js"></script>


<div id="dallas-murder-rate" class="section level2">
<h2>Dallas Murder Rate</h2>
<p>Based on the following data set from Dallas Open Data: <a href="https://www.dallasopendata.com/Public-Safety/Police-Incidents/qv6i-rri7" class="uri">https://www.dallasopendata.com/Public-Safety/Police-Incidents/qv6i-rri7</a></p>
</div>
<div id="preparing-the-data" class="section level2">
<h2>Preparing the data</h2>
<p>We extract murder incidents by looking for “MURDER” or “HOMICIDE” in the officer’s incident description.</p>
<pre class="r"><code>Murder &lt;- PI[grepl(&quot;MURDER&quot;,offincident) | grepl(&quot;HOMICIDE&quot;,offincident),]
Murder[,Date := as.Date(substr(date1,1,10))]
Murder[,MonthDate := as.Date(paste0(format(Date,&quot;%Y-%m&quot;),&quot;-01&quot;))]
setorder(Murder,Date)

Murder[,NumPerDay := .N,by = Date]
Murder[,NumPerMonth := .N,by = MonthDate]

Murder[,SmoothNumPerDay := predict(smooth.spline(NumPerDay,df = 20))$y]
Murder[,SmoothNumPerMonth := predict(smooth.spline(NumPerMonth,df = 10))$y]</code></pre>
<pre class="r"><code>plot(Murder[,.N,by = Date])
lines(Murder$Date,Murder$SmoothNumPerDay,col = &quot;red&quot;)</code></pre>
<p><img src="index_files/figure-html/plots-1.png" width="672" /></p>
<pre class="r"><code>plot(Murder[,.N,by = MonthDate])
lines(Murder$MonthDate,Murder$SmoothNumPerMonth,col = &quot;red&quot;)</code></pre>
<p><img src="index_files/figure-html/plots-2.png" width="672" /></p>
<pre class="r"><code>ggplot(Murder,aes(x = MonthDate,y = SmoothNumPerMonth)) + geom_line() + geom_point() + facet_wrap(~ offincident)</code></pre>
<pre><code>## geom_path: Each group consists of only one observation. Do you need to adjust
## the group aesthetic?</code></pre>
<p><img src="index_files/figure-html/plots-3.png" width="672" /></p>
<pre class="r"><code>ggplot(Murder,aes(x = Date,y = NumPerDay,color = offincident)) + geom_point()</code></pre>
<p><img src="index_files/figure-html/plots-4.png" width="672" /></p>
<pre class="r"><code>ggplot(Murder,aes(x = MonthDate,y = SmoothNumPerMonth)) + geom_line() + geom_point()</code></pre>
<p><img src="index_files/figure-html/plots-5.png" width="672" /></p>
<pre class="r"><code>ggplot(Murder,aes(x = MonthDate)) + geom_bar()</code></pre>
<p><img src="index_files/figure-html/plots-6.png" width="672" /></p>
<pre class="r"><code>ggplot(Murder,aes(x = comprace)) + geom_bar()</code></pre>
<p><img src="index_files/figure-html/plots-7.png" width="672" /></p>
</div>
