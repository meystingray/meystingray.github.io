---
title: Crime Rates in Dallas
author: Sean Conroy
date: '2021-01-23'
slug: crime-rates-in-dallas
categories:
  - Dallas-Police-Data
tags: []
---

<script src="index_files/header-attrs/header-attrs.js"></script>


<p>First, letâ€™s calculate the Crime Rates:</p>
<pre class="r"><code>PI[,Date := as.Date(substr(date1,1,10))]

PI &lt;- PI[Date &gt;= as.Date(&quot;2014-06-01&quot;),]
setorder(PI,Date)

PI[,MonthDate := as.Date(paste0(format(Date,&quot;%Y-%m&quot;),&quot;-01&quot;))]


PI[grepl(&quot;MURDER&quot;,offincident) | grepl(&quot;HOMICIDE&quot;,offincident) | grepl(&quot;MURDER&quot;,ucr_offense) | 
     grepl(&quot;HOMICIDE&quot;,nibrs_crime_category) | grepl(&quot;MURDER&quot;,nibrs_crime),
   NumMurdersPerMonth := .N,by = MonthDate]

PI[,NumMurdersPerMonth := mean(NumMurdersPerMonth,na.rm = TRUE),by = MonthDate]

PI[grepl(&quot;SUBSTANCE&quot;,offincident) | grepl(&quot;MARIJUANA&quot;,offincident) | grepl(&quot;DRUG&quot;,offincident),
   NumDrugsPerMonth := .N,by = MonthDate]

PI[,NumDrugsPerMonth := mean(NumDrugsPerMonth,na.rm = TRUE),by = MonthDate]


PI[grepl(&quot;KIDNAP&quot;,offincident),NumKidnapPerMonth := .N,by = MonthDate]

PI[,NumKidnapPerMonth := mean(NumKidnapPerMonth,na.rm = TRUE),by = MonthDate]


PI[grepl(&quot;ACCIDENT&quot;,offincident),NumAccidentsPerMonth := .N,by = MonthDate]

PI[,NumAccidentsPerMonth := mean(NumAccidentsPerMonth,na.rm = TRUE),by = MonthDate]


PI[grepl(&quot;ASSAULT&quot;,offincident),NumAssaultsPerMonth := .N,by = MonthDate]

PI[,NumAssaultsPerMonth := mean(NumAssaultsPerMonth,na.rm = TRUE),by = MonthDate]


PI[grepl(&quot;THEFT&quot;,offincident),NumTheftsPerMonth := .N,by = MonthDate]

PI[,NumTheftsPerMonth := mean(NumTheftsPerMonth,na.rm = TRUE),by = MonthDate]</code></pre>
<p>Pivot in preparation to plot:</p>
<pre class="r"><code>combined &lt;- PI[,head(.SD,1),
               .SDcols = c(&quot;NumMurdersPerMonth&quot;,&quot;NumAssaultsPerMonth&quot;,&quot;NumKidnapPerMonth&quot;,
                           &quot;NumTheftsPerMonth&quot;,&quot;NumAccidentsPerMonth&quot;,&quot;NumDrugsPerMonth&quot;),
               by = MonthDate]

# Remove falsely low month aggregated values since the month is not yet complete.
combined &lt;- combined[MonthDate &lt; as.Date(&quot;2021-01-01&quot;)]

combined &lt;- melt(combined,
                 measure.vars = c(&quot;NumMurdersPerMonth&quot;,&quot;NumAssaultsPerMonth&quot;,&quot;NumTheftsPerMonth&quot;,
                                  &quot;NumAccidentsPerMonth&quot;,&quot;NumDrugsPerMonth&quot;,&quot;NumKidnapPerMonth&quot;),
             id.vars = c(&quot;MonthDate&quot;))

combined[variable == &quot;NumMurdersPerMonth&quot;,variable := &quot;# Murders Per Month&quot;]
combined[variable == &quot;NumAssaultsPerMonth&quot;,variable := &quot;# Assaults Per Month&quot;]
combined[variable == &quot;NumTheftsPerMonth&quot;,variable := &quot;# Thefts Per Month&quot;]
combined[variable == &quot;NumAccidentsPerMonth&quot;,variable := &quot;# Vehicle Accidents Per Month&quot;]
combined[variable == &quot;NumDrugsPerMonth&quot;,variable := &quot;# Drug Incidents Per Month&quot;]
combined[variable == &quot;NumKidnapPerMonth&quot;,variable := &quot;# Kidnapping Incidents Per Month&quot;]

setnames(combined,old = names(combined),new = c(&quot;Date&quot;,&quot;Crime&quot;,&quot;# Per Month&quot;))</code></pre>
<p>Now finally plot the data:</p>
<pre class="r"><code>ggplot(combined,aes(x = Date)) + geom_point(aes(y = `# Per Month`,color = Crime),na.rm = TRUE) +
  geom_smooth(aes(y = `# Per Month`,color = Crime),method = &quot;loess&quot;,formula = y ~ x,n = 50,na.rm = TRUE) + 
  facet_wrap(~Crime,scales = &quot;free&quot;) + theme(legend.position = &quot;none&quot;)</code></pre>
<p><img src="index_files/figure-html/Plot%20the%20Data-1.png" width="960" /></p>
<p>Wow. Looks like crime across the board is trending up.</p>
